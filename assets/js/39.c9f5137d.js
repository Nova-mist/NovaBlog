(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{310:function(t,s,a){"use strict";a.r(s);var e=a(13),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"博客搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#博客搭建"}},[t._v("#")]),t._v(" 博客搭建")]),t._v(" "),s("h2",{attrs:{id:"github-pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-pages"}},[t._v("#")]),t._v(" GitHub Pages")]),t._v(" "),s("p",[t._v("静态页面如此简单：")]),t._v(" "),s("ol",[s("li",[t._v("创建项目")]),t._v(" "),s("li",[t._v("根目录新建 "),s("code",[t._v("index.html")])]),t._v(" "),s("li",[t._v("进入项目设置页面的 "),s("em",[t._v("Pages")]),t._v(" 选项页面")]),t._v(" "),s("li",[t._v("设置 Source  和 Branch\n注意：选择 Branch 的时候，源文件的路径只能是 "),s("code",[t._v("/")]),t._v(" 或 "),s("code",[t._v("/docs")])]),t._v(" "),s("li",[t._v("访问 "),s("code",[t._v("https://[your-name].github.io/[repo-name]")])])]),t._v(" "),s("p",[t._v("关于设置页面上提到的 "),s("code",[t._v("Jekyll")]),t._v("：")]),t._v(" "),s("p",[t._v("我之前的博客使用的 "),s("code",[t._v("hexo")]),t._v(" 就是在本地编译后将 "),s("code",[t._v("public")]),t._v(" 目录下的静态页面发布到远程仓库并由 GitHub Pages 托管。")]),t._v(" "),s("p",[s("code",[t._v("Jekyll")]),t._v(" 和 "),s("code",[t._v("hexo")]),t._v(" 在本质上都是静态文档生成器。")]),t._v(" "),s("p",[t._v("也可以直接将 "),s("code",[t._v("vuepress")]),t._v(" 编译后的文件放到仓库中，🟠但是一定要设置 "),s("code",[t._v("config.js")]),t._v(" 中的 "),s("code",[t._v("base")]),t._v(" 网址。可以编写一个 "),s("code",[t._v("deploy.sh")]),t._v(" 然后每次运行，在本地编译后推送到远程仓库。")]),t._v(" "),s("p",[t._v("✅可以设置 GitHub Pages 使用分支中的源文件，便于内容管理和版本控制。")]),t._v(" "),s("blockquote",[s("p",[t._v("一些使用 github 分支的命令")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接一个新建的空项目")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" remote "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" origin git@github.com:Nova-mist/xxxx.git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-M")]),t._v(" main\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" origin main "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -u 设置推送流 以后 git push 默认推送此流")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"new branch"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" add.\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" status\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"new branch"')]),t._v("\n")])])]),s("h2",{attrs:{id:"github-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actions"}},[t._v("#")]),t._v(" GitHub Actions")]),t._v(" "),s("p",[t._v("gh-pages 其实也是一个 gh-action")]),t._v(" "),s("p",[t._v("我感觉特别像 Docker。")]),t._v(" "),s("h3",{attrs:{id:"构建-vuepress"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建-vuepress"}},[t._v("#")]),t._v(" 构建 vuepress")]),t._v(" "),s("ol",[s("li",[t._v("创建一个 GitHub Actions，具体内容见下。")]),t._v(" "),s("li",[t._v("将文章修改推送到远程仓库 "),s("code",[t._v("main")]),t._v(" 分支时，GitHub Actions 会自动构建新的静态页面然后推送到 "),s("code",[t._v("gh-pages")]),t._v(" 分支。")]),t._v(" "),s("li",[t._v("设置 GitHub Pages 托管 "),s("code",[t._v("gh-pages")])])]),t._v(" "),s("p",[s("code",[t._v("vuepress-deploy.yml")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build and Deploy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@master\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vuepress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jenkey2011/vuepress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@master\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ACCESS_TOKEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  secrets.ACCESS_TOKEN  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_SCRIPT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" yarn docs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_DIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n\n")])])]),s("p",[t._v("使用 "),s("code",[t._v("secrets.ACCESS_TOKEN")]),t._v(" 之前需要做的步骤：")]),t._v(" "),s("ol",[s("li",[t._v("获取 "),s("em",[t._v("Personal access token")])]),t._v(" "),s("li",[t._v("在该仓库设置页面的 "),s("em",[t._v("Secrets")]),t._v(" 选项，创建一个 "),s("code",[t._v("ACCESS_TOKEN")]),t._v(" 值，这样 Actions 就可以获取到。")])]),t._v(" "),s("p",[t._v("参考：")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("部署 | VuePress (vuejs.org)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkey2011/vuepress-deploy: A GitHub Action to build and deploy Vuepress sites to GitHub Pages"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);